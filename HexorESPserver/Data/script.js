document.addEventListener("DOMContentLoaded", () => { let $ = document.getElementById("map"), _ = $.getContext("2d"), e = document.getElementById("moveInMap"), t = document.getElementById("endPointSel"), n = document.getElementById("drawObject"), l = document.getElementById("infoInMap"), o = document.getElementById("skipRedraw"), i = document.getElementById("drawPoint"), d = document.getElementById("divider"), c = document.getElementById("divider1"), s = document.getElementById("column1"), g = document.getElementById("column1-top"), u = document.getElementById("column1-bottom"), h = document.getElementById("column2"); document.getElementById("mainMenuButton"); let f = document.getElementById("MMtail"), b = document.getElementById("MMrobot"), k = document.getElementById("myModal"), m = document.getElementById("Network_connection"), E = document.getElementsByClassName("close")[0], v = document.getElementById("confirmBtn"), p = document.getElementById("toggleBtn"), B = document.getElementById("SSID"), L = document.getElementById("PASS"), I = document.getElementById("outputField"), w = [], C = 10, x, H = !1, S = !1, M = Math.round(1, 1), T = ["move", "select", "info", "drawObject"], W = T[0], P, R = { x: 0, y: 0, size: 1, en: !1, valid: !0, change: !0, scaling: { H: 1, W: 1 } }, z = { x: 0, y: 0, size: 2, en: !1, valid: !0, change: !0, scaling: { H: 1, W: 1 } }, G = [], F, Y = 0, q = "SE", X = [45, 315, 90, 270, 135, 225, 180], N = !0, O = 0, V, j, D, A, K, Z, J, Q; var U = { left: 0, wheel: 1, right: 2, btn4: 3, btn5: 4 }; let $$ = !1, $_, $e, $t = 2, $n = 2, $l = -20, $o = -20, $i, $r, $a, $d = !1, $c = { path: "#c7fe0c", cornerPoints: "#682dfa", robot: "#f89b06", target: "#00FF00", obstacles: "#1d1c1c", workspace: "#565656", pathTouched: "#111111", pointVal2: "#565656", highlightedPoint: "#FF0000", triedPath: "#70ff00", beforeOptimalization: "#FF00FF", freeSpace: "#f0f0f0", pointVal3: "#0f0f0f" }, $s = !1, $g = 0, $u = 0, $y = [], $h = document.getElementById("idxInPath"), $f = document.getElementById("pathLength"), $b = document.getElementById("resetIdx"), $k = 0, $m = $k, $E = []; $E[$k] = " ", $E[1] = "w", $E[2] = "a", $E[3] = "d", $E[4] = "s", $E[5] = "g", $E[6] = "h", $E[7] = "j", $E[8] = "k"; let $v = !1; var $0 = 0; let $p = ["robot", "tail"], $B = $p[0], $L, $I = 0; $R(), $J(), _e(5), $U(), __($k), setInterval($D, 5e3), h.style.width = "80%", s.style.width = "20%", g.style.height = "45%", u.style.height = "55%"; let $w; function $C(e) { rect = $.getBoundingClientRect(), D = $.width / $.clientWidth, A = $.height / $.clientHeight; let t, n; e.type.includes("touch") ? (t = e.touches[0].clientX, n = e.touches[0].clientY) : (t = e.clientX, n = e.clientY), $l = Math.round((t - rect.left) * D, 1), $o = Math.round((n - rect.top) * A, 1), W == T[0] ? ($$ = !0, $.style.cursor = "grabbing", $_ = t, $e = n) : e.button == U.wheel ? (P = W, W = T[0], $R(), $$ = !0, $.style.cursor = "grabbing", $_ = t, $e = n) : W == T[1] && e.button == U.left ? (V = ($l - $t) / R.scaling.W, j = ($o - $n) / R.scaling.H, !1 == R.en ? (R.scaling.H = scaleH, R.scaling.W = scaleW, R.x = Math.round(V, 1), R.y = Math.round(j, 1), R.en = !0, R.change = !0, R.valid = !0, $S()) : e.ctrlKey ? (locX2 = Math.floor(($l - $t) / scaleW, 1), locY2 = Math.floor(($o - $n) / scaleH, 1), _.fillRect($t + locX2 * scaleW, $n + locY2 * scaleH, scaleW, scaleH), z.x = locX2, z.y = locY2, z.scaling.H = scaleH, z.scaling.W = scaleW, z.en = !0, z.change = !0, z.valid = !0, N = !0, $S()) : (R.x == V && R.y == j ? (R.en = !1, $S()) : R.scaling.H = scaleH, R.scaling.W = scaleW, R.x = Math.round(V, 1), R.y = Math.round(j, 1), R.change = !0, R.valid = !0, $S())) : W == T[3] && $6(e) } function $3(_) { if ($$) { switch (P) { case T[0]: $.style.cursor = "grab"; break; case T[1]: $.style.cursor = "crosshair"; break; case T[2]: $.style.cursor = "help"; break; default: $.style.cursor = "grab" }W = P, $R() } $$ = !1, isDrawing = !1 } function $1(_) { let e, t; if (_.type.includes("touch") ? (e = _.touches[_.touches.length - 1].clientX, t = _.touches[_.touches.length - 1].clientY) : (e = _.clientX, t = _.clientY), W == T[0] && $$) { let n = $.width / $.clientWidth, l = $.height / $.clientHeight; $t += (e - $_) * n, $n += (t - $e) * l, $_ = e, $e = t, $S() } mPos = document.getElementById("mPos"), mZ = document.getElementById("mapZero"), locms = "mou: [" + Math.round(e - (rect = $.getBoundingClientRect()).left, 1) + ";" + Math.round(t - rect.top, 1) + "]", mPos.innerHTML = locms, ($t + $r * scaleW < 0 || $t > $.clientWidth) && ($t = 2), ($n + $i * scaleH < 0 || $n > $.clientHeight) && ($n = 2), W == T[3] && isDrawing && $6(_) } function $x($) { if ($v) { let _ = $.clientX / document.body.clientWidth * 100; h.style.width = 100 - _ + "%", s.style.width = _ + "%" } } function $H($) { if ($v) { let _ = $.clientY / document.body.clientHeight * 100; g.style.height = _ + "%", u.style.height = 100 - _ + "%" } } function $2() { $v = !1, document.removeEventListener("mousemove", $x), document.removeEventListener("mousemove", $H), document.removeEventListener("mouseup", $2) } function $S() { if (void 0 != x && clearInterval(x), x = setTimeout($S, 200), scaleW = scale * ($.width / $.clientWidth), scaleH = scale * ($.height / $.clientHeight), o.checked) { clearInterval(x), x = setTimeout($S, 2e3); return } if ($j(), O = Math.sqrt($i ** 2 + $r ** 2), $W(), (F = document.getElementById("koordsGoal")).innerHTML = "C\xedl: ", F.innerHTML += R.en ? "" + Math.round(R.x) + ", " + Math.round(R.y) : "Nezvolen", $h.value = $g, R.en && $M(), z.en && $T(), R.en && z.en && z.valid && R.valid) { if ((R.change || z.change) && z.valid && R.valid) { clearInterval(x), $d = !1, R.change = !1, z.change = !1, Y = 0; let _ = [], e = []; try { $N(), _ = $G([z.x, z.y, 0], [R.x, R.y, 0], 0) } catch (t) { console.log(t.message), _[0] = -1 } try { $N(), e = $G([R.x, R.y, 0], [z.x, z.y, 0], 0) } catch (n) { console.log(n.message), e[0] = -1 } if (_[0] > 0 && _[0] < e[0]) Y = _[0], G = $7(_[1]); else if (e[0] > 0) Y = e[0], G = e[1]; else if (_[0] < 0 && e[0] < 0) { let l = [], i = [], d = [], c = [[]], s = 0; for (let g = C; g < $i; g += C)for (let u = C; u < $r; u += C) { d = [u, g, 0], $N(); try { l = $G(d, [R.x, R.y], 0) } catch (h) { console.log(h.message); continue } $N(); try { i = $G([z.x, z.y], d, 0) } catch (f) { console.log(f.message); continue } l[0] > 0 && i[0] > 0 && (c[s] = $X($7(i[1]), $7(l[1])), $4(c[s].length, c[s++], $c.triedPath)) } let b = ($r * $i) ** 2, k = 0; for (let m = 0; m < c.length; m++)c[m].length < b && (k = m, b = c[m].length); Y = c[k].length, G = c[k] } else Y = _[0], G = $7(_[1]); R.valid = Y > 0, Y = (_ = $O(Y, G))[0], G = _[1], G = $X([[z.x, z.y, 1]], G), $4(Y, G = $X(G, [[R.x, R.y, 1]]), $c.beforeOptimalization), $N(), Y = (_ = $q(Y, G, q, [z.x, z.y], [R.x, R.y]))[0], G = _[1], $d = Y > 0, $f.innerHTML = Y, x = setTimeout($S, 200) } $d ? $4(Y, G) : console.log("Pathfinding failed!") } } function $M() { (R.x > $r || R.x < 0 || R.y > $i || R.y < 0) && (R.valid = !1), _.fillStyle = R.valid ? $c.target : $c.highlightedPoint, V = R.x * scaleW + $t, j = R.y * scaleH + $n, _.fillRect(V - R.size * scaleW / 2, j - R.size * scaleH / 2, R.size * scaleW, R.size * scaleH) } function $T() { (z.x > $r || z.x < 0 || z.y > $i || z.y < 0) && (z.valid = !1), _.fillStyle = z.valid ? $c.robot : $c.highlightedPoint, V = z.x * scaleW + $t, j = z.y * scaleH + $n, _.fillRect(V - z.size * scaleW / 2, j - z.size * scaleH / 2, z.size * scaleW, z.size * scaleH); document.getElementById("koordsAct").innerHTML = "Robot: " + +locX2 + ", " + locY2 + ", ?" } function $W() { let e = 1 * scaleW, t = 1 * scaleH, n = $t; _.clearRect(0, 0, $.width, $.height), N && ($a = $z($a)); for (let l = 0; l < $i; l++)for (let o = 0; o < $r; o++) { switch (n = $t + o * e, y = $n + l * t, $a[l * $r + o]) { case 0: _.fillStyle = $c.freeSpace; break; case 1: _.fillStyle = $c.obstacles; break; case 2: _.fillStyle = $c.workspace; break; case 3: _.fillStyle = $c.pathTouched; break; default: _.fillStyle = $c.freeSpace, $a[l * $r + o] = 0 }_.fillRect(n, y, e + 1, t + 1) } } function $4($, _, e) { let t; for (let n = 0; n < $; n++)if (void 0 != _[n]) { switch (_[n][2]) { case 0: if (void 0 != e) { t = e; break } t = $c.path; break; case 1: t = $c.cornerPoints; break; case 2: t = $c.pointVal2; break; case 3: t = $c.pointVal3; default: t = $c.highlightedPoint }$5(_[n], t) } } function $6($) { locX2 = Math.floor(($l - $t) / scaleW), locY2 = Math.floor(($o - $n) / scaleH, 1), $.button == U.left && !$.ctrlKey || isDrawing ? ($a[locY2 * $r + locX2] = 1, (objGoal = document.getElementById("objGoal")).innerHTML = "Nov\xe1 pøek\xe1žka na: " + locX2 + ", " + locY2, N = !0, $y[$u++] = 1) : $.button == U.left && (_.fillRect($t + locX2 * scaleW, $n + locY2 * scaleH, scaleW, scaleH), z.x = locX2, z.y = locY2, z.scaling.H = scaleH, z.scaling.W = scaleW, z.en = !0, z.change = !0, z.valid = !0, N = !0, $S()) } function $P() { $s ? void 0 != mapImage && ($i = mapImage.height, $r = mapImage.width) : ($i = 100, $r = 100), scaleH = (scale = Math.min(height = $.clientHeight / $i, width = $.clientWidth / $r)) * ($.height / $.clientHeight) - 20, scaleW = scale * ($.width / $.clientWidth) - 20, console.log(scale), console.log($i), console.log($r), $a = $V($w), $S(), $R() } function $R() { switch ($j(), W) { case T[0]: $.style.cursor = "grab", t.style.backgroundColor = "lightgrey", l.style.backgroundColor = "lightgrey", e.style.backgroundColor = "#23ff01", n.style.backgroundColor = "lightgrey"; break; case T[1]: $.style.cursor = "crosshair", t.style.backgroundColor = "#23ff01", l.style.backgroundColor = "lightgrey", e.style.backgroundColor = "lightgrey", n.style.backgroundColor = "lightgrey"; break; case T[2]: $.style.cursor = "help", t.style.backgroundColor = "lightgrey", l.style.backgroundColor = "#23ff01", e.style.backgroundColor = "lightgrey", n.style.backgroundColor = "lightgrey"; break; case T[3]: $.style.cursor = "crosshair", n.style.backgroundColor = "#23ff01", l.style.backgroundColor = "lightgrey", e.style.backgroundColor = "lightgrey", t.style.backgroundColor = "lightgrey"; break; default: W = T[0], $R() } } function $z($) { let _ = []; for (let e = 0; e < $r; e++)for (let t = 0; t < $i; t++)if (1 == $[e * $r + t]) { _[e * $r + t] = 1; for (let n = e - M; n <= e + M; n++)for (let l = t - M; l <= t + M; l++)n >= 0 && n < $r && l >= 0 && l < $i && 1 != $[n * $r + l] && (_[n * $r + l] = 2) } return N = !1, _ } function $5($, e) { let t = 1 * scaleW, n = 1 * scaleH; _.fillStyle = e; let l = Math.round($t + $[0] * scaleW, 1), o = Math.round($n + $[1] * scaleH, 1); _.fillRect(l, o, t + 1, n + 1) } function $G($, _, e) { let t = $a[$[1] * $r + $[0]], n = [], l = [], o = [], i = $i * $r, d; if (void 0 == e || e < 0 ? e = 1 : d = e++, 1 == t || 2 == t) return [-1, 0]; if ($[0] < 0 || $[1] < 0 || $[0] > $r || $[1] > $i); else if ($[0] == _[0] && $[1] == _[1]) { let c = 0; return o[c++] = $, [c, o] } else if (0 == t) { $a[$[1] * $r + $[0]] = 3; let s = [_[0] - $[0], _[1] - $[1]], g = Math.round(Math.sqrt(s[0] ** 2 + s[1] ** 2), 1), u = [s[0] / Math.sqrt(s[0] ** 2 + s[1] ** 2), s[1] / Math.sqrt(s[0] ** 2 + s[1] ** 2)], h = []; if ((h = $F(u, $, _, g))[0] > 1) return [h[0] + 1, $7(h[1])]; if (h[0] < -1 && ($[1] = h[1][-h[0] - 1][1], $[0] = h[1][-h[0] - 1][0]), u = [Math.round(u[0]), Math.round(u[1])], (l = $G(n = [$[0] + u[0], $[1] + [1], 0], _, d))[0] > 0) return (o = l[1])[l[0]++] = $, [l[0], o]; for (let f = 0; f < X.length; f++) { let b = 3.14 / 180 * X[f], k = $Y(r = [Math.cos(b), -Math.sin(b), Math.sin(b), Math.cos(b)], [2, 2], u, [1, 2]); if (n[0] = $[0] + Math.round(k[0], 1), n[1] = $[1] + Math.round(k[1], 1), n[2] = 0, (l = $G(n, _, d))[0] > 0) return i = l[0] - h[0], o = $X(l[1], [$]), [(o = $X(o, $7(h[1]))).length, o] } } return [-1, 0] } function $F($, _, e, t) { let n = []; for (let l = 0; l < t; l++) { let o = [], i = []; i[0] = _[0] + (l + 1) * $[0], i[1] = _[1] + (l + 1) * $[1], o[0] = Math.round(i[0], 1), o[1] = Math.round(i[1], 1), o[2] = 0; let d = $a[o[1] * $r + o[0]]; if (1 == d || 2 == d) return [-l, n]; if (o[0] == e[0] && o[1] == e[1]) return [l, n]; if (o[0] < 0 || o[1] < 0 || o[0] > $r - 1 || o[1] > $i - 1) return [l, n]; n[l] = o } console.log("run outside the for cy (followVector)") } function $Y($, [_, e], t, [n, l]) { let o = []; return o[0] = $[0] * t[0] + $[1] * t[1], o[1] = $[2] * t[0] + $[3] * t[1], o } function $q($, _, e, t, n) { if ($ < 0) return [$, _]; "ES" == e && (_ = $7(_), e = "SE"), way = $X([t], _), way = $X(way, [n]); let l = [[], [], []], o = [], i, d, c = 0; for (let s = 0; s < way.length - 1; s++) { d = way[s], l[l.length - 1][0] = d[0], l[l.length - 1][1] = d[1], c = 0; for (let g = s + 2; g < way.length; g++) { let u = [(i = way[g])[0] - d[0], i[1] - d[1]]; if (0 == u[0] && 0 == u[1]) { console.log("SP==GP"); break } let h = $F([u[0] / Math.sqrt(u[0] ** 2 + u[1] ** 2), u[1] / Math.sqrt(u[0] ** 2 + u[1] ** 2)], d, i, O); h[0] > 0 && (c = g, (o = h[1])[o.length - 1][2] = 1) } l = $X(l, o), s = c > 1 ? c - 1 : s } return [l.length, l] } function $X($, _) { let e = []; for (let t = 0; t < $.length; t++)e[t] = $[t]; let n = $.length; for (let l = 0; l < _.length; l++)e[n + l] = _[l]; return e } function $7($) { let _ = []; for (let e = 0; e < $.length; e++)_[e] = $[$.length - 1 - e]; return _ } function $N() { for (let $ = 0; $ < $i * $r; $++)$a[$] = 3 == $a[$] ? 0 : $a[$] } function $O($, _) { let e = [], t = 0; for (let n = 0; n < $; n++)void 0 != _[n] && void 0 != _[n][0] && void 0 != _[n][1] && (e[t++] = _[n], void 0 == _[n][2] && (e[t - 1][2] = 0)); return [e.length, e] } function $V($) { let _ = []; for (let e = 0; e <= $r * $i; e++)switch ($[e]) { case "0": default: _[e] = 0; break; case "1": _[e] = 1 }return _ } function $j() { let $ = document.getElementById("pHcl1b"), _ = document.getElementById("legend"); if (W != T[2]) { void 0 != _ && $.removeChild(_); return } if (void 0 == _) { let e = document.createElement("div"), t = document.createElement("h2"); t.innerHTML = "Legend for map"; let n = document.createElement("ul"); for (let l in $c) { let o = document.createElement("li"); o.innerHTML = l, o.style.textShadow = "0px 0px 5px #000000", o.style.color = $c[l], n.appendChild(o) } n.style.marginTop = "1px", e.appendChild(t), e.appendChild(n), e.style.overflow = "hidden", e.id = "legend", $.appendChild(e) } } function $D() { g.style.height = 45 + s.style.width / g.style.width + "%"; let $ = document.getElementById("battery"), _ = "linear-gradient(90deg," + (batteryStateColour = "#ae00ff") + " " + (batteryPercentage = "100%") + ", lightgrey 1%)"; $.style.background = _ } function $A() { let $ = new XMLHttpRequest; $.onreadystatechange = function () { 4 == $.readyState && 200 == $.status && (batteryPercentage = this.response + "%") }, $.open("GET", "/battery", !0), $.send() } function $K() { let $ = new XMLHttpRequest; $.onreadystatechange = function () { 4 == $.readyState && 200 == $.status && ($I = this.response) }, $.open("GET", "/privilages", !0), $.send() } function $Z() { let $ = new XMLHttpRequest; $.onreadystatechange = function () { 4 == $.readyState && 200 == $.status && _e(mode = this.response + 4) }, $.open("GET", "/mode", !0), $.send() } function $8() { let $ = new XMLHttpRequest; $.onreadystatechange = function () { if (4 == $.readyState && 200 == $.status) { let _ = this.response.split(""); localStorage.Robot.x = _[0], localStorage.Robot.y = _[1] } }, $.open("GET", "/privilages", !0), $.send() } function $J() { switch ($B) { case $p[0]: b.style.backgroundColor = "#23ff01", f.style.backgroundColor = "lightgrey"; break; case $p[1]: f.style.backgroundColor = "#23ff01", b.style.backgroundColor = "lightgrey"; break; default: $B = $p[0], $J() } } function $Q($) { console.log($.key), S = document.getElementById("NRTScheck").checked; let _; switch ($.key) { case $E[2]: console.log("left"), _ = "keyup" != $.type || S ? 2 : $k; break; case $E[4]: console.log("back"), _ = "keyup" != $.type || S ? 4 : $k; break; case $E[3]: console.log("right"), _ = "keyup" != $.type || S ? 3 : $k; break; case $E[1]: console.log("fwd"), _ = "keyup" != $.type || S ? 1 : $k; break; case $E[$k]: console.log("stop"), _ = $k; break; case $E[5]: console.log("mode1"), _ = $k; break; case $E[6]: console.log("mode2"), _ = $k; break; case $E[7]: console.log("mode3"), _ = $k; break; case $E[8]: console.log("mode4"), _ = $k; break; default: _ = $k }__(_) } function $U() { for (let $ = 1; $ < 10; $++) { let _ = "dirButton" + $, e = document.getElementById(_); e.addEventListener("mousedown", () => { $9(_) }), e.addEventListener("touchstart", () => { $9(_) }), e.addEventListener("mouseup", () => { $9("dirButton5") }), e.addEventListener("touchend", () => { $9("dirButton5") }) } } function $9($) { _$($), _t() } function _$($) { let _ = $k; switch ($) { case "dirButton1": _ = 5; break; case "dirButton2": _ = 1; break; case "dirButton3": _ = 6; break; case "dirButton4": _ = 2; break; case "dirButton5": default: _ = $k; break; case "dirButton6": _ = 3; break; case "dirButton7": _ = 7; break; case "dirButton8": _ = 4; break; case "dirButton9": _ = 8 }__(_) } function __($) { $m = $ < 5 ? $ : $m; let _ = [2, 4, 5, 6, 8]; for (let e = 0; e < _.length; e++)document.getElementById("dirButton" + _[e]).style.backgroundColor = "#1287c3"; let t; switch ($m) { case $k: (t = document.getElementById("dirButton" + _[2])).style.backgroundColor = "#1de3ef"; break; case 1: (t = document.getElementById("dirButton" + _[0])).style.backgroundColor = "#1de3ef"; break; case 4: (t = document.getElementById("dirButton" + _[4])).style.backgroundColor = "#1de3ef"; break; case 2: (t = document.getElementById("dirButton" + _[1])).style.backgroundColor = "#1de3ef"; break; case 3: (t = document.getElementById("dirButton" + _[3])).style.backgroundColor = "#1de3ef" }_e($ >= 5 ? $ : $L) } function _e($) { $L = $; let _ = [1, 3, 7, 9]; for (let e = 0; e < _.length; e++)document.getElementById("dirButton" + _[e]).style.backgroundColor = "#1287c3"; let t; switch ($L) { case 5: (t = document.getElementById("dirButton" + _[0])).style.backgroundColor = "#6004c8"; break; case 6: (t = document.getElementById("dirButton" + _[1])).style.backgroundColor = "#6004c8"; break; case 7: (t = document.getElementById("dirButton" + _[2])).style.backgroundColor = "#6004c8"; break; case 8: (t = document.getElementById("dirButton" + _[3])).style.backgroundColor = "#6004c8" }_n() } function _t() { let $ = new XMLHttpRequest; $.open("GET", "/?" + $B + "=" + $m + "&", !0), $.send() } function _n() { let $ = new XMLHttpRequest; $.open("GET", "/? mode=" + $L + "&", !0), $.send() } function _l() { } function _o() { for (let $ = 1; $ < 10; $++) { let _ = "dirButton" + $; w[$ - 1] = document.getElementById(_), w[$ - 1].addEventListener("click", _ => { _i(_, $ - 1) }) } } function _i($, _) { let e = document.getElementById("MMrobot"); if (console.log(e.style.backgroundColor), !$s && "rgb(35, 255, 1)" == e.style.backgroundColor) { switch (_) { case 0: case 2: case 4: case 6: case 8: break; case 1: z.y--; break; case 3: z.x--; break; case 5: z.x++; break; case 7: z.y++ }z.change = !0 } } function _r($, _) { $i = _, $r = $; for (let e = 0; e < $ * _; e++)$w += "0" } function _a() { if (!$s) return -1; if ($i <= 100 && $r <= 100) for (let $ = 0; $ < $a.length; $++)$w[$] = 1 == $a[$] ? "1" : "0"; else if ($i > 100 || $r > 100) { let _, e, t, n; _ = z.y - 50 > 0 ? z.y - 50 : 0, e = z.y + 50 < 100 ? z.y + 50 : 100, t = z.y - 50 > 0 ? z.x - 50 : 0; let l = (n = z.x + 50 < 100 ? z.x + 50 : 100) - t, o = 0; for (let i = _; i < e; i++)for (let d = t; d < n; d++)$w[o++] = 1 == $a[i * l + d] ? "1" : "0" } let c = new XMLHttpRequest; c.open("/GET", "/?map=" + widthToSend + ";" + heigthToSend + ";" + $w + "&", !0), c.send() } $s || ($w = "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001110011111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000001110000000000000000000000001111000000000000000000000000000000000000000000000000000000000000010000000011100000000000000000000001111111111000000000000000000000000000000000000000000000000000000001000000000110000000000000000000000111101111111000000000000000000000000000000000000000000000000000000110000000011000000000000000000000011110001111110000000000000000000000000000000000000000000000000000001100000001100000000000000000000001110000000111000000000000000000000000000000000000000000000000000000111100001100000000000000000000000111000000001110000000000000000000000000000000000000000000000000000000111111100000000000000000000000011100000000111000000000000000000000000000000000000000000000000000000000000000000000000000000000000001110000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011100000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011110000011100000000000000000000000000000000000000000000000000000000000000000000000000000000000011111000000001111000000000000000000000000000000000000000000000000000000000000000000000000000000000111110000000000011110000000000000000000000000000000000000000000000000000000000000000000000000000001111100000000000000011100000000000000000000000000000000000000000000000000000000000000000000000000011111100000000000000000110000000000000000000000000000000000000000000000000000000000000000000000000111110000000000000000000011100000000000000000000000000000000000000000000000000000000000000000000001111100000000000000000000000111000000000000000000000000000000000000000000000000000000000000000000011111100000000000000000000000001110000000000000000000000000000000000000000000000000000000000000000011111000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000111110000000000000000000000000000001110000000000000000000000000000000000000000000000000000000000000111110000000000000000000000000000000011100000000000000000000000000000000000000000000000000000000000011110000000000000000000000000000000011111000000000000000000000000000000000000000000000000000000000001111000000000000000000000000000000011111000000000000000000000000000000000000000000000000000000000000011100000000000000000000000000000111110000000000000000000000000000000000000000000000000000000000000001110000000000000000000000000001111100000000000000000000000000000000000000000000000000000000000000000011100000000000000000000000011111000000000000000000000000000000000000000000000000000000000000000000001111100000000000000000000111110000000000000000000000000000000000000000000000000000000000000000000000011111000000000000000001111100000000000000000000000000000000000000000000000000000000000000000000000000111110000000000000011110000000000000000000000000000000000000000000000000000000000000000000000000000011111100000000001111100000000000000000000000000000000000000000000000000000000000000000000000000000000111110000000111111000000000000000000000000000000000000000000000000000000000000000000000000000000000001111100001111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000011110000111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111001111100000000000000000000000000000000000000000000000000000000000000000000000000011111111111111100000011111000000000000000000000000000000000000000000000000000000000000000000000011111111111111000000000001111110000000000000000000000000000000000000000000000000000000000000000000111111111111000000000000000011111100000000000000000000000000000000000000000000000000000000000000111111111111000000000000000000000111111000000000000000000000000000000000000000000000000000011111111111111111100000000000000000000000001111110000000000000000000000000000000000000100000011111111111111111111100000000000000000000000000000111111000000000000000000000000000000000000011111111111111111111111100000000000000000000000000000000001111110000000000000000000000000000000000011111111111111111111000000000000000000000000000000000000000001111100000000000000000000000000000000001111111111111000000000000000000000000000000000000000000000000011111000000000000000000000000000000000111100000000000000000000000000000000000000000000000000000000000111110000000000000000000000000000000011110000000000000000000000000000000000000000000000000000000000001111100000000000000000000000000000001111000000000000000000000000000000000000000000000000000000000000001111000000000000000000000000000000111110000000000000000000000000000000000000000000000000000000000000011100000000000000000000000000000001111000000000000000000000000000000000000000000000000000000000000000011000000000000000000000000000000111100000000000000000000000000000000000000000000000000000000000000001110000000000000000000000000000001111000000000000000000000000000000000000000000000000000000000000000011100000000000000000000000000000011100000000000000000000000000000000000000000000000000000000000000001111000000000000000000000000001111111000000000000000000000000000000000000000000000000000000000000000011100000000000000000000001111111011100000000000000000000000000000000000000000000011111111111111111111111000000000000000000000100000001111000000000000000000000000000000000000000111111111111111111111111111100000000000000000000000000000011110000000000000000000000000000000111111111111111111111111111111111111000000000000000000000000000001111000000000000000001111111111111111111111111111000000011111111111111100000000000000000000000000000111110000000011111111111111111111111111111000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", _o(), $P()), $.addEventListener("mousedown", $ => { $C($) }), $.addEventListener("touchstart", $ => { $C($) }), document.addEventListener("mouseup", $ => { $3($) }), document.addEventListener("touchend", $ => { $3($) }), document.addEventListener("mousemove", $ => { $1($) }), document.addEventListener("touchmove", $ => { $1($) }), $.addEventListener("wheel", _ => { rect = $.getBoundingClientRect(), D = $.width / $.clientWidth, A = $.height / $.clientHeight, $l = Math.round((_.clientX - rect.left) * D, 1), $o = Math.round((_.clientY - rect.top) * A, 1), K = ($l - $t) / R.scaling.W, Z = ($o - $n) / R.scaling.H, _.preventDefault(); let e = -_.deltaY > 0 ? 1.1 : .9; scale *= e, scaleH = scale * A, scaleW = scale * D, R.scaling.H = scaleH, R.scaling.W = scaleW, z.scaling.H = scaleH, z.scaling.W = scaleW, J = ($l - $t) / R.scaling.W, Q = ($o - $n) / R.scaling.H, $t += (J - K) * scaleW, $n += (Q - Z) * scaleH, ($t + $r * scaleW < 0 || $t > $.clientWidth / 2) && ($t = 2), ($n + $i * scaleH < 0 || $n > $.clientHeight / 2) && ($n = 2), $S() }), e.addEventListener("click", () => { W = T[0], $R() }), t.addEventListener("click", () => { W = T[1], $R() }), n.addEventListener("click", () => { W = T[3], $R() }), l.addEventListener("click", () => { W = T[2], $R() }), $h.addEventListener("change", () => { $g = $h.value }), $b.addEventListener("click", () => { $h.value = 0, $g = 0 }), i.addEventListener("click", () => { !(void 0 == G[0] || $g > Number($f.innerHTML) - 1) && ($5(G[$g++], $c.highlightedPoint), $g = $g < Number($f.innerHTML) - 1 ? $g : 0, $h.value = $g) }), document.addEventListener("keypress", $ => { if (a = document.getElementById("MMrobot").style.backgroundColor, !$s && "rgb(35, 255, 1)" == a) { let _ = -1; switch ($.key) { case $E[2]: console.log("left"), _ = 3; break; case $E[4]: console.log("back"), _ = 7; break; case $E[3]: console.log("right"), _ = 5; break; case $E[1]: console.log("fwd"), _ = 1; break; case $E[$k]: console.log("stop"); break; case $E[5]: console.log("mode1"); break; case $E[6]: console.log("mode2"); break; case $E[7]: console.log("mode3"); break; case $E[8]: console.log("mode4") }_i($, _) } }), document.addEventListener("resize", $S), document.addEventListener("keypress", $ => { $Q($) }), document.addEventListener("keyup", $ => { $Q($) }), d.addEventListener("mousedown", $ => { $v = !0, document.addEventListener("mousemove", $x), document.addEventListener("mouseup", $2) }), d.addEventListener("touchstart", $ => { $v = !0, document.addEventListener("touchmove", $x), document.addEventListener("touchend", $2), document.addEventListener("touchcancel", $2) }), c.addEventListener("mousedown", $ => { $v = !0, document.addEventListener("mousemove", $H), document.addEventListener("mouseup", $2) }), c.addEventListener("touchstart", $ => { $v = !0, document.addEventListener("touchmove", $H), document.addEventListener("touchend", $2), document.addEventListener("touchcancel", $2) }), b.addEventListener("click", () => { $B = $p[0], $J() }), f.addEventListener("click", () => { $B = $p[1], $J() }), m.addEventListener("click", () => { k.style.display = "block" }), E.addEventListener("click", () => { k.style.display = "none" }), v.addEventListener("click", () => { let $ = B.value; I.textContent = "Zadan\xfd text: " + $.innerHTML }), p.addEventListener("click", () => { H = !H, L.type = H ? "text" : "password" }) });